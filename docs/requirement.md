# **Requirements: 좌석 예약 시스템 (MVP)**

> 이 문서는 PRD에 명시된 비즈니스 요구사항을 바탕으로, 좌석 예약 시스템 MVP 개발을 위한 기능적/비기능적 요구사항을 정의합니다.

## 1. 일반 요구사항 (General Requirements)

-   **G-1**: 시스템은 별도의 회원가입 및 로그인 절차 없이, 비회원 기반으로 모든 예약/조회/취소 기능을 제공해야 한다.
-   **G-2**: 모든 페이지는 반응형 웹 디자인을 고려하여, 모바일과 데스크톱 환경에서 적절한 레이아웃을 제공해야 한다.
-   **G-3**: 사용자에게 현재 진행 상황이나 시스템의 상태 변화(예: API 호출 중, 성공, 실패)를 명확하게 인지할 수 있는 시각적 피드백(로딩 스피너, 토스트 메시지 등)을 제공해야 한다.

## 2. 기능 요구사항 (Functional Requirements)

### 2.1 콘서트 조회

-   **F-1.1 (홈)**: 사용자는 예약 가능한 모든 콘서트의 목록을 볼 수 있어야 한다.
    -   각 콘서트 항목은 카드 형태로 표시되며, 최소한 콘서트 제목과 이미지를 포함해야 한다.
    -   콘서트 카드를 클릭하면 해당 콘서트의 상세 페이지로 이동해야 한다.
-   **F-1.2 (콘서트 상세)**: 사용자는 특정 콘서트의 상세 정보를 조회할 수 있어야 한다.
    -   표시 정보: 히어로 이미지, 공연 일시, 공연 장소.
    -   등급별 정보(등급명, 가격, 해당 등급의 총 좌석 수 및 잔여 좌석 수)가 목록 형태로 표시되어야 한다.
    -   전체 잔여 좌석 수와 전체 좌석 수가 명시되어야 한다. (예: `잔여 150석 / 전체 500석`)
    -   좌석 선택 페이지로 이동하는 '예약하기' 버튼이 있어야 한다.

### 2.2 좌석 선택 및 선점

-   **F-2.1 (좌석 선택 페이지)**: 사용자는 시각적인 좌석 배치도를 통해 좌석을 선택할 수 있어야 한다.
    -   페이지 상단에는 현재 보고 있는 콘서트의 제목이 표시되어야 한다.
    -   좌석은 상태(예약 가능, 선택 불가, 현재 선택)에 따라 시각적으로 구분(예: 색상)되어야 한다.
    -   좌석 등급별로 구역이 시각적으로 구분되어야 한다.
-   **F-2.2 (좌석 선택 인터랙션)**: 사용자는 '예약 가능' 상태의 좌석을 클릭하여 선택하거나 선택 해제할 수 있어야 한다.
    -   선택된 좌석은 다른 상태와 시각적으로 명확히 구분되어야 한다.
    -   사용자가 선택한 좌석의 정보(등급, 구역, 좌석 번호, 가격)가 실시간으로 목록에 표시되어야 한다.
    -   선택한 좌석들의 총 합계 금액이 실시간으로 표시되어야 한다.
-   **F-2.3 (선점 요청)**: 사용자가 '예약하기 (N석 선택)' 버튼을 클릭하면, 선택된 좌석들에 대해 시스템에 임시 선점을 요청해야 한다.
    -   버튼의 텍스트는 선택한 좌석 수(N)를 동적으로 반영해야 한다.
    -   한 개 이상의 좌석이 선택되었을 때만 버튼이 활성화되어야 한다.
-   **F-2.4 (선점 정책)**: 좌석 선점은 **5분의 유효 시간**을 가진다.
    -   선점 성공 시, 사용자는 예약 정보 입력 페이지로 이동해야 한다.
    -   선점된 좌석은 5분 동안 다른 사용자가 선택할 수 없는 '임시 선점' 상태가 되어야 한다.
    -   사용자가 5분 내에 예약을 완료하지 않으면, 선점된 좌석은 자동으로 해제되어 다시 '예약 가능' 상태로 변경되어야 한다.

### 2.3 예약 생성

-   **F-3.1 (예약 정보 입력 페이지)**: 사용자는 예약자 정보를 입력할 수 있어야 한다.
    -   이전에 선점한 좌석 정보(등급, 구역, 번호, 가격)와 총 결제 금액이 재확인용으로 표시되어야 한다.
    -   선점 만료까지 남은 시간을 시각적으로 표시하는 타이머(카운트다운)가 있어야 한다.
    -   입력 폼 필드: 이름, 휴대폰 번호, 예약 조회용 비밀번호.
    -   각 폼 필드에 대한 기본적인 유효성 검사(예: 필수 입력, 형식)가 수행되어야 한다.
-   **F-3.2 (예약 완료)**: '예약 완료' 버튼 클릭 시, 입력된 정보와 선점된 좌석 정보로 최종 예약을 생성해야 한다.
    -   예약 생성 성공 시, 사용자는 예약 완료 페이지로 이동해야 한다.
    -   예약 생성 실패(예: 선점 시간 만료) 시, 사용자에게 명확한 에러 메시지를 보여주고 좌석 선택 페이지로 돌려보내야 한다.
-   **F-3.3 (예약 완료 페이지)**: 사용자는 예약 성공 내역을 확인할 수 있어야 한다.
    -   "예약이 성공적으로 완료되었습니다."와 같은 성공 메시지가 표시되어야 한다.
    -   시스템에서 발급된 고유 **예약 번호**가 표시되어야 한다.
    -   예약된 공연 정보, 좌석, 총액 등 전체 예약 상세 내역이 표시되어야 한다.
    -   '홈으로 가기'와 '예약 조회하기' 페이지로 이동하는 버튼이 있어야 한다.

### 2.4 예약 조회 및 취소

-   **F-4.1 (예약 조회 폼)**: 사용자는 자신의 예약 내역을 조회하기 위해 정보를 입력할 수 있어야 한다.
    -   입력 폼 필드: 예약 시 사용한 휴대폰 번호, 비밀번호.
-   **F-4.2 (예약 조회 실행)**: '예약 조회' 버튼 클릭 시, 시스템은 입력된 정보와 일치하는 예약 내역을 찾아야 한다.
    -   일치하는 예약이 있으면, 해당 예약의 상세 페이지로 이동해야 한다.
    -   일치하는 예약이 없으면, "일치하는 예약 정보를 찾을 수 없습니다."와 같은 메시지를 표시해야 한다.
-   **F-4.3 (예약 내역 상세)**: 사용자는 조회된 예약의 전체 상세 정보를 볼 수 있어야 한다.
    -   표시 정보는 예약 완료 페이지와 동일한 수준의 상세 내역을 포함해야 한다.
-   **F-4.4 (예약 취소)**: 사용자는 '예약 취소' 버튼을 통해 예약을 취소할 수 있어야 한다.
    -   취소 시, 사용자에게 최종 확인을 요청하는 확인 모달(Confirm Dialog)을 표시해야 한다.
    -   사용자가 확인하면 예약이 취소되고, 관련 좌석은 다시 '예약 가능' 상태로 변경되어야 한다.
    -   취소 성공 후, 사용자에게 성공 메시지를 보여주고 홈 페이지나 예약 조회 페이지로 이동시켜야 한다.

## 3. 비기능적 요구사항 (Non-Functional Requirements)

-   **NF-1 (동시성 제어)**: 여러 사용자가 동시에 동일한 좌석을 선택하고 선점을 시도할 경우, 시스템은 단 한 명의 사용자만 성공적으로 선점할 수 있도록 보장해야 한다 (First-come, first-served). 중복 예약을 방지해야 한다.
-   **NF-2 (성능)**: 좌석 선택 페이지의 좌석 배치도는 1,000석 규모에서도 2초 이내에 로드되어야 한다. 좌석 선택 및 해제에 대한 UI 반응은 즉각적이어야 한다.
-   **NF-3 (보안)**: 예약 조회에 사용되는 비밀번호는 데이터베이스에 암호화(해싱)하여 저장해야 한다.
-   **NF-4 (URL 구조)**: 시스템의 페이지들은 PRD에 정의된 IA(Information Architecture)에 따라 직관적이고 예측 가능한 URL 구조를 가져야 한다.